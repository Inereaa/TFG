<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pages/Viajes.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pages/Viajes.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import Navegacion from "../components/Navegacion";
import Footer from "../components/Footer";
import Filtros from "../components/Filtros";
import Buscar from "../components/Buscar";
import Ordenar from "../components/Ordenar";
import ListarViajes from "../components/ListarViajes";
import { Link } from "react-router";
import { useEffect, useState } from "react";
import { useLocation } from "react-router-dom";

/**
 * Componente Viajes
 * 
 * Página principal para visualizar y filtrar viajes.
 * Gestiona filtros, ordenación y estado de autenticación del usuario.
 * Permite navegar a la creación de un nuevo viaje si el usuario está autenticado.
 * 
 * @component
 * @returns {JSX.Element} Componente con lista de viajes filtrados y opciones de navegación
 */
export default function Viajes() {
  const location = useLocation();
  const [usuarioAutenticado, setUsuarioAutenticado] = useState(false);
  /**
   * Estado que almacena los filtros aplicados para la búsqueda de viajes
   * @property {string} destino - Lugar destino del viaje
   * @property {string} fechaInicio - Fecha de inicio del viaje
   * @property {number|null} precioMaximo - Precio máximo para filtrar viajes
   * @property {Array&lt;string>} continentes - Continentes seleccionados para filtrar
   */
  const [filtros, setFiltros] = useState({
    destino: "",
    fechaInicio: "",
    precioMaximo: null,
    continentes: [],
  });
  const [orden, setOrden] = useState("Precio (más caro primero)");

  useEffect(() => {
    // Verifica si hay token para determinar autenticación
    const token = localStorage.getItem("token");
    setUsuarioAutenticado(!!token);
    
    // Lee parámetros URL para predefinir filtros de destino y fecha
    const queryParams = new URLSearchParams(location.search);
    const destino = queryParams.get("destino");
    const fechaInicio = queryParams.get("fechaInicio");

    setFiltros((prev) => ({
      ...prev,
      destino: destino || "",
      fechaInicio: fechaInicio || "",
    }));
  }, [location.search]);

  return (
    &lt;div className="min-h-screen bg-white text-gray-800 flex flex-col">
      &lt;Navegacion />
      &lt;div className="-mt-4">
        &lt;Buscar filtros={filtros} setFiltros={setFiltros} />
      &lt;/div>

      &lt;div className="flex px-10 py-8 gap-10 ml-60 mr-60">
        &lt;Filtros setFiltros={setFiltros} filtros={filtros} />

        &lt;section className="xl:w-3/4 flex flex-col gap-6">
          &lt;Ordenar setOrden={setOrden} />

          {usuarioAutenticado &amp;&amp; (
            &lt;div className="flex xl:justify-end justify-center">
              &lt;p className="bg-red-500 hover:bg-red-600 text-white px-2 py-2 xl:px-6 xl:py-3 rounded-xl font-semibold transition cursor-pointer">
                &lt;Link to="/crearviaje">➕ &lt;span className="hidden md:inline-block"> Crear nuevo viaje&lt;/span>&lt;/Link>
              &lt;/p>
            &lt;/div>
          )}

          &lt;ListarViajes filtros={filtros} orden={orden} />
        &lt;/section>
      &lt;/div>
      &lt;Footer />
    &lt;/div>
  );
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Mon Jun 09 2025 18:19:33 GMT+0200 (hora de verano de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
